{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport iziToast from 'izitoast';\nimport axios from 'axios';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst apiKey = '41883234-6691d5bcae5feebb5d3051225';\nconst searchForm = document.getElementById('searchForm');\nconst searchInput = document.getElementById('searchInput');\nconst loader = document.querySelector('.loader');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.getElementById('loadMoreBtn');\nlet currentPage = 1;\nlet currentSearchTerm = '';\n\nvar lightbox = new SimpleLightbox('.gallery a', {\n  captionDelay: 250,\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n});\n\nsearchForm.addEventListener('submit', async function (event) {\n  event.preventDefault();\n  const searchTerm = searchInput.value.trim();\n\n  if (searchTerm !== '') {\n    loader.style.display = 'block';\n    gallery.innerHTML = '';\n    loadMoreBtn.style.display = 'none';\n    currentPage = 1;\n    currentSearchTerm = searchTerm;\n\n    try {\n      await handleSearchResults(currentSearchTerm, currentPage);\n    } catch (error) {\n      handleRequestError(error);\n    }\n  }\n});\n\nloadMoreBtn.addEventListener('click', async function () {\n  currentPage++;\n  loader.style.display = 'block';\n\n  try {\n    await handleSearchResults(currentSearchTerm, currentPage, true);\n  } catch (error) {\n    handleRequestError(error);\n  }\n});\n\nasync function handleSearchResults(searchTerm, page, append = false) {\n  try {\n    const data = await fetchData(searchTerm, page);\n    loader.style.display = 'none';\n\n    if (data.hits.length > 0) {\n      if (append) {\n        displayImages(data.hits);\n        smoothScrollGallery();\n      } else {\n        gallery.innerHTML = '';\n        displayImages(data.hits);\n      }\n\n      if (data.totalHits <= page * 40) {\n        hideLoadMoreButton();\n      } else {\n        showLoadMoreButton();\n      }\n    } else {\n      hideLoadMoreButton();\n      showNoResultsMessage();\n    }\n  } catch (error) {\n    handleRequestError();\n  }\n}\n\nfunction fetchData(searchTerm, page) {\n  const url = 'https://pixabay.com/api/';\n  const params = {\n    key: apiKey,\n    q: searchTerm,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: page,\n    per_page: 40,\n  };\n\n  return axios.get(url, { params }).then(response => response.data);\n}\n\nfunction displayImages(images) {\n  const galleryHTML = generateGalleryHTML(images);\n  gallery.insertAdjacentHTML('beforeend', galleryHTML);\n  searchInput.value = '';\n  lightbox.refresh();\n}\n\nfunction generateGalleryHTML(images) {\n  return images\n    .map(\n      image => `\n      <div class=\"image-container\">\n        <a href=\"${image.largeImageURL}\">\n          <img src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n        </a>\n        <div class=\"image-panel\">\n          <div class=\"statistic\">\n            <p>Likes</p>\n            <p>${image.likes}</p>\n          </div>\n          <div class=\"statistic\">\n            <p>Views</p>\n            <p>${image.views}</p>\n          </div>\n          <div class=\"statistic\">\n            <p>Comments</p>\n            <p>${image.comments}</p>\n          </div>\n          <div class=\"statistic\">\n            <p>Downloads</p>\n            <p>${image.downloads}</p>\n          </div>\n        </div>\n      </div>\n      `\n    )\n    .join('');\n}\n\nfunction hideLoadMoreButton() {\n  loadMoreBtn.style.display = 'none';\n}\n\nfunction showLoadMoreButton() {\n  loadMoreBtn.style.display = 'block';\n}\n\nfunction showNoResultsMessage() {\n  iziToast.error({\n    position: 'topRight',\n    message:\n      'Sorry, there are no images matching your search query. Please try again.',\n  });\n}\n\nfunction handleRequestError(error) {\n  loader.style.display = 'none';\n  iziToast.error({\n    position: 'topRight',\n    message: error.message,\n  });\n}\n\nfunction smoothScrollGallery() {\n  const cardHeight = gallery.firstElementChild.clientHeight;\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["apiKey","searchForm","searchInput","loader","gallery","loadMoreBtn","currentPage","currentSearchTerm","lightbox","SimpleLightbox","event","searchTerm","handleSearchResults","error","handleRequestError","page","append","data","fetchData","displayImages","smoothScrollGallery","hideLoadMoreButton","showLoadMoreButton","showNoResultsMessage","url","params","axios","response","images","galleryHTML","generateGalleryHTML","image","iziToast","cardHeight"],"mappings":"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"}